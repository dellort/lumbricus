weapons {
    mine {
        type = "action"
        value = "10"
        category = "sheep"
        icon = "icon_mine"
        firemode {
            mode = "throw"
            direction = "fixed"
            strength_mode = "fixed"
            strength_value = "40"
            timer = "false"
            relaxtime = "1 s"
        }
        onfire {
            type = "spawn"
            spawndist = "2"
            projectile = "legacy_mine"
            count = "1"
        }
        onblowup {
            type = "spawn"
            spawndist = "2"
            projectile = "legacy_mine"
            count = "1"
            random = "60"
            initial_velocity = "fixed"
            strength_value = "50"
        }
        animation = "weapon_mine"
        projectiles {
            legacy_mine {
                type = "projectile_mc"
                stateful = "true"
                initstate = "normal"
                //team_animation = "true"
                physics {
                    normal {
                        collide = "projectile"
                        mass = "10"
                        radius = "2"
                        explosion_influence = "1.0"
                        wind_influence = "0.0"
                        elasticity = "0.6"
                        glue_force = "120"
                        rotation = "distance"
                    }
                    drowning {
                        collide = "waterobj"
                        radius = "1"
                        damageable = "0.0"
                        explosion_influence = "0.0"
                        glue_force = "0"
                    }
                }
                states {
                    normal {
                        animation = "normal"
                        inactive_when_glued = "true"
                        actions {
                            oncreate {
                                {
                                    //the delay after dropping the mine
                                    //(to have some time to run)
                                    type = "delay"
                                    duration = "3s"
                                }
                                {
                                    type = "proximitysensor"
                                    collision = "wormsensor"
                                    radius = "45"
                                    trigger_delay = "0"
                                }
                            }
                            ontrigger {
                                type = "state"
                                state = "triggered"
                            }
                        }
                    }
                    triggered {
                        animation = "flashing"
                        physic = "normal"
                        detonate {
                            ontimer = "true"
                        }
                        actions {
                            oncreate {
                                type = "timer"
                                //the time from stepping on until it blows
                                //xxx make configurable (for random delays)
                                delay = "1 s"
                            }
                        }
                    }
                    drowning {
                        animation = "drown"
                        disable_events = "true"
                        particle = "p_projectiledrown"
                    }
                }
                actions {
                    ondetonate {
                        type = "explosion"
                        damage = "50"
                    }
                }
                sequence_object = "s_mine"
            }
        }
    }
}
