//file where the required animations are found
require_animations = "wormanim"
//initial state (at least useful for automatic object placement)
initstate = "sit"

//special for worm.d
jet_velocity = "300"

//collision map additions for the worms
collisions {
    //"worm": first type for PhysicWorld.setCollide()
    worm {
        //second type + action (cookie value for setCollide())
        ground = "hit"
        //collides with other worms
        worm = "hit"
    }
    jetworm {
        ground = "jethit"
    }
}

//physical states, used by the "states" section
physics {
    worm {
        radius = "5"
        glue_force = "100"
        walking_speed = "20"
    }
    jetworm {
        radius = "5"
        mass = "1"
        //xxx can't glue with jetpack yet (but it should)
        //reason: velocity vector is cut all the time
        glue_force = "0"
        elasticity = "0.5"
    }
}

//all the object states
//state selects collision class, physics and animations of an object
//state transition for worms is mostly done by special code...
states {
    sit {
        //collision class the worm physical object is set to
        collide = "worm"
        //load these physic properties
        physic = "worm"

        //see comments in src/game/sprite.d
        angle2animations = "step3"
        animations = "worm_stand_"
    }
    fly {
        collide = "worm"
        physic = "worm"

        //need animation, currently use sniff animation to see the difference...
        angle2animations = "step3"
        animations = "worm_sniff_"
    }
    walk {
        collide = "worm"
        physic = "worm"
        angle2animations = "step3"
        animations = "worm_move_"
    }
    weapon {
        collide = "worm"
        physic = "worm"
        angle2animations = "step3"
        //xxx animation depends from weapon!
        //maybe pick animation by special code in worm.d
        animations = "worm_hold_banana_"
    }
    jetpack {
        collide = "jetworm"
        physic = "jetworm"

        angle2animations = "twosided"
        animations = "worm_jet"
    }
}

//play special an animation between a specific state change
state_transitions {
    //list of state transitions
    {
        //transition from state "worm" to "jetworm"
        from = "sit"
        to = "jetpack"

        //animation works the reverse way too (just from and to swaped)
        works_reverse = "true"

        //try to disable physics while playing the animation
        disable_physics = "true"

        //give an animation as usual
        angle2animations = "step3"
        animations = "worm_startjetpack_"
    }
    {
        //this is like a hack
        from = "fly"
        to = "jetpack"
        works_reverse = "true"
        disable_physics = "true"
        angle2animations = "step3"
        animations = "worm_startjetpack_"
    }
    {
        from = "sit"
        to = "weapon"
        works_reverse = "true"

        angle2animations = "step3"
        //xxx weapon specific again
        //additionally, this shouldn't be animated
        animations = "worm_getbanana_"
    }
}
