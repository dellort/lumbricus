name = "worm"
type = "worm_mc"

//initial state (at least useful for automatic object placement)
initstate = "stand"

//special for worm.d
jet_thrust = "4000 10000"

suicide_damage = "30"
jump_st_normal = "1500 -2100"
jump_st_smallback = "-200 -2100"
jump_st_straightup = "0 -3000"
jump_st_backflip = "-300 -3000"
rope_impulse = "700"

//selects SequenceObject, which again is provided in wwp.conf
//xxx: for now, sequence_object is always the prefix for the state name
//     e.g. in state 'stand', there's 'animation = "stand"', which means the
//     state name is 's_worm_stand', see wwp.conf!
sequence_object = "s_worm"

collisions {
    define = "worm_n grave worm_jet worm_all"
    classes {
        worm_all = "player"
        worm_jet = "worm_all"
        worm_n = "worm_all"
    }
    hit {
        grave = "ground"
        worm_all = "worm_all"
    }
}

//physical states, used by the "states" section
physics {
    worm {
        //collision class the worm physical object is set to
        collide = "worm_n"
        radius = "5"
        mass = "10"
        glue_force = "20"
        walking_speed = "50"
        elasticity = "0.5"
        bounce_absorb = "400"
        slide_absorb = "150"
        damageable = "1.0"
        friction = "0.6"
        extend_normalcheck = "true"
        sustainable_impulse = "5000"
        fall_damage_factor = "0.004"
        fall_damage_ignore_x = "true"
    }
    beaming {
        collide = "worm_n"
        radius = "5"
        mass = "10"
        //don't move
        fixate = "0 0"
        damage_unfixate = "true"
        //not invulnerable while beaming
        damageable = "1.0"
    }
    jetworm {
        collide = "worm_jet"
        radius = "5"
        mass = "10"
        glue_force = "0"
        elasticity = "0.5"
        velocity_constraint = "200 250"
        damageable = "1.0"
        sustainable_impulse = "5000"
        fall_damage_factor = "0.0"
        jetpack_looking = "true"
    }
    rope {
        collide = "worm_n"
        radius = "5"
        mass = "10"
        glue_force = "0"
        elasticity = "0.85"
        damageable = "1.0"
        fall_damage_factor = "0.0"
    }
    grave { //duplicated in grave.conf
        collide = "grave"
        radius = "5"
        fixate = "0 1"
        elasticity = "0.3"
        glue_force = "50"
    }
    water {
        collide = "waterobj"
        radius = "1"
        damageable = "0.0"
        explosion_influence = "0.0"
        glue_force = "0"
    }
    win {
        damageable = "0.0"
        fixate = "0 0"
    }
}

//all the object states
//state selects collision class, physics and animations of an object
//state transition for worms is mostly done by special code...
states {
    stand {
        //load these physic properties
        physic = "worm"
        animation = "stand"
        is_grounded = "true"
        can_walk = "true"
        can_fire = "true"
    }
    beaming {
        physic = "beaming"
        animation = "beaming"
        noleave = "true"
        on_animation_end = "reverse_beaming"
    }
    reverse_beaming {
        physic = "beaming"
        animation = "reverse_beaming"
        noleave = "true"
        on_animation_end = "fly"
    }
    fly {
        physic = "worm"
        //animation chosen by special code
        animation = "fly_fall"
    }
    getup {
        physic = "worm"
        animation = "bounce_minor"
        on_animation_end = "stand"
        is_grounded = "true"
    }
    walk {
        physic = "worm"
        animation = "walk"
        is_grounded = "true"
        can_walk = "true"
    }
    weapon {
        physic = "worm"
        //animation is weapon specific; special code in worm.d
        is_grounded = "true"
        can_walk = "true"
        can_aim = "true"
        can_fire = "true"
    }
    jetpack {
        physic = "jetworm"

        animation = "jetpack"
    }
    jump_start {
        physic = "worm"
        animation = "jump_start"
        is_grounded = "true"
        on_animation_end = "jump"
    }
    jump {
        physic = "worm"
        //custom animation
    }
    jump_to_fly {
        physic = "worm"
        animation = "jump_to_fall"
        on_animation_end = "fly"
    }
    rope {
        animation = "rope"
    }
    drowning {
        physic = "water"

        animation = "drown"
    }
    win {
        physic = "win"
        animation = "win"
        noleave = "true"
        is_grounded = "true"
    }
    die {
        physic = "grave"

        //byebye-animation
        on_animation_end = "dead"
        animation = "die"
        noleave = "true"
        is_grounded = "true"
    }
    dead {
        physic = "grave"
        //not allowed to leave state
        noleave = "true"
    }
}

//since r318 no state transitions anymore
