require_animations = "wormanim"

weapons {
    {
        name = "banana"
        //the weapon class
        type = "projectiles"
        //cost of this weapon in worms-dollar
        value = "10"
        firemode {
            mode = "throw" //throw a projectile
            direction = "any" //360 degrees
            strength = "variable" //as we know it from bananas
            //setable timer, just passed to projectile
            timer = "true"
            timerrange = "1 5"
            //xxx unused: next time this weapon can be fired
            relaxtime = "1"
        }
        //what happens when you fire the weapon
        onfire {
            //same as "spawn" node in projectiles.death
            {
                name = "spawn"
                //don't know; but interpolated with throw-strength
                strengthmax = "10"
                spawndist = "2"
                projectile = "mainbanana"
                //number of projectiles
                count = "1"
                //time after which a new projectile is spawned
                //delay = "..."
            }
        }
        animation {
            //arm is wired towards the "weapon" state in worm.conf
            arm {
                //xxx: animations sadly fixed to worms
                angle2animations = "step3"
                animations = "worm_getbanana_"
            }
            //wired to state transition to-and-from "sit -> weapon" in worm.conf
            hold {
                //xxx: not really an animation, but each frame is for a specific
                //  angle; this should be an attribute of an animation, and be
                //  possible for all animations! but currently it's hardcoded
                angle2animations = "step3"
                animations = "worm_hold_banana_"
            }
            //also will be needed for some stuff:
            //firing { ... }
        }
        projectiles {
            mainbanana {
                //select sprite class
                //the rest of this confignode is mainly handled by the sprite
                //(either the sprite class or any supertype of it)
                type = "projectile"
                physics {
                    collisionclass = "cluster"
                    mass = "10"
                    radius = "2"
                    explosionaware = "false"
                    windinfluence = "0.0"
                }
                //how projectile can die
                //NOTE: can also be forced to die; i.e. fall into the water
                death_howcome {
                    mode = "timer"
                    lifetime = "$LIFETIME$"
                }
                death {
                    {
                        name = "spawn"
                        count = "5"
                        delay = "0" //all the same time
                        projectile = "bananashard"
                        minangle = "60"
                        maxangle = "120"
                        minspeed = "100"
                        maxspeed = "150"
                    }
                    {
                        name = "explosion"
                        radius = "200"
                        force = "50"
                    }
                }
                animation {
                    angle2animations = "simple"
                    animations = "banana_fly"
                }
            }
            bananashard {
                type = "projectile"
                physics {
                    collisionclass = "nowindimpactor"
                    mass = "5"
                    radius = "2"
                    explosionaware = "false"
                    windinfluence = "0.0"
                }
                death_howcome {
                    mode = "impact"
                }
                death {
                    {
                        name = "explosion"
                        radius = "200"
                        force = "999999999"
                    }
                }
                animation {
                    angle2animations = "simple"
                    animations = "banana_fly"
                }
            }
        } //projectiles
    } //banana
} //list of weapons
